# Boundary Node Prober

## Summary

Simple external prober which performs probing to subnet nodes by 
creating canisters and performing queries and updates on them. Metrics
regarding success/failure of nodes is exposed through a prometheus 
endpoint. 

In order to run this, a location to the routes file like the one
generated by the boundary node control plane is required. In
addition, a location to the directory where a wallets file is 
placed is required. The wallets file should look like the following:

001.wallets
```
{
  "subnet": {
    "<subnet-id-1>": "<subnet-wallet-1>",
    "<subnet-id-2>": "<subnet-wallet-2>"
  }
}
```

Include the flag --mainnet if targeting the mainnet with the prober.

## Running

   ```
   cargo run -- \
     --routes_dir .
     --wallets_dir .
     --metrics_port 8080
   ```
## Metrics

|type|metric name|descr|param|
|-----|----|----|---|
|counter| probes_completed |Number of probes completed ||
|gauge_vec|create_canister_failure| Create canister failure on a given subnet. |subnet_id|
|gauge_vec| cleanup_canister_failure| Cleanup canister failure on a given subnet |subnet_id|
|gauge_vec |create_canister_success |Create canister success on a given subnet |subnet_id|
|gauge_vec| node_probe_failure |Probe failure on a particular node. |node_id|
|gauge_vec| node_probe_success |Probe success on a particular node. |node_id|
|gauge_vec| node_probe_latency |Probe latency on a particular node. |node_id|
|gauge_vec| subnet_probe_failure |Probe failure on a particular subnet.| subnet_id|
